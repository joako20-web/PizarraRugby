<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Pizarra Rugby</title>

    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data: blob:; font-src 'self'; connect-src 'self'; media-src 'self' blob:; object-src 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), payment=()">

    <!-- Performance: Preload Critical Resources -->
    <link rel="preload" href="./src/main.css" as="style">
    <link rel="modulepreload" href="./src/js/app.js">
    <link rel="modulepreload" href="./src/js/core/state.js">
    <link rel="modulepreload" href="./src/js/renderer/renderer.js">

    <!-- Meta Tags -->
    <meta name="description"
        content="PizarraRugby - Herramienta t谩ctica profesional para dise帽ar, animar y exportar jugadas de rugby. Ideal para entrenadores y jugadores."
        data-i18n-content="meta_description">
    <meta name="keywords" content="rugby, t谩ctica, pizarra, jugadas, entrenamiento, animaci贸n, formaciones">
    <meta name="author" content="PizarraRugby">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#f1f5f9" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pizarrarugby.com/">
    <meta property="og:title" content="PizarraRugby - Herramienta T谩ctica Profesional">
    <meta property="og:description"
        content="Crea, anima y exporta jugadas de rugby de forma profesional. Sistema de frames, formaciones guardadas y m谩s.">
    <meta property="og:image" content="https://pizarrarugby.com/og-image.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://pizarrarugby.com/">
    <meta name="twitter:title" content="PizarraRugby - Herramienta T谩ctica Profesional">
    <meta name="twitter:description" content="Crea, anima y exporta jugadas de rugby de forma profesional.">
    <meta name="twitter:image" content="https://pizarrarugby.com/og-image.png">

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

    <title data-i18n="app_title">PizarraRugby - Herramienta T谩ctica Profesional</title>

    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="./src/main.css">

    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "PizarraRugby",
      "applicationCategory": "SportsApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "Herramienta t谩ctica profesional para dise帽ar, animar y exportar jugadas de rugby",
      "screenshot": "https://pizarrarugby.com/screenshot.png",
      "featureList": [
        "Dise帽o de jugadas t谩cticas",
        "Animaci贸n de movimientos",
        "Exportaci贸n de video WebM",
        "Formaciones guardadas",
        "Modo presentaci贸n"
      ],
      "author": {
        "@type": "Organization",
        "name": "PizarraRugby"
      }
    }
    </script>

</head>

<body>
    <!-- Bot贸n de men煤 para m贸vil y desktop (Show Sidebar) -->
    <!-- Left Toggle: Chevron Right (Desktop) / Menu (Mobile) - controlled via CSS hiding/showing? 
         Simpler: Just a high quality Menu icon that looks good everywhere, or a Sidebar icon. -->
    <button id="mobile-menu-btn" class="mobile-nav-btn mobile-nav-btn--left" aria-label="Abrir Men煤">
        <!-- Icono: Layout Sidebar Left -->
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
            <line x1="9" y1="3" x2="9" y2="21" />
        </svg>
    </button>

    <button id="mobile-right-menu-btn" class="mobile-nav-btn mobile-nav-btn--right" aria-label="Abrir Animaci贸n">
        <!-- Icono: Film / Video -->
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" />
            <line x1="7" y1="2" x2="7" y2="22" />
            <line x1="17" y1="2" x2="17" y2="22" />
            <line x1="2" y1="12" x2="22" y2="12" />
            <line x1="2" y1="7" x2="7" y2="7" />
            <line x1="2" y1="17" x2="7" y2="17" />
            <line x1="17" y1="17" x2="22" y2="17" />
            <line x1="17" y1="7" x2="22" y2="7" />
        </svg>
    </button>

    <!-- ========================================
         PANEL LATERAL IZQUIERDO (SIDEBAR)
         ======================================== -->
    <aside id="sidebar" class="sidebar">
        <!-- Header Container used for alignment -->
        <!-- Bot贸n de cerrar (Chevron Left) - Flotante -->
        <button id="close-sidebar-btn" class="panel-close-btn" aria-label="Cerrar men煤">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
            </svg>
        </button>

        <!-- Contenedor de paneles de jugadores (para tutorial) -->
        <div id="players-panels" class="sidebar__group">
            <!-- Panel de jugadores del equipo AZUL -->
            <section class="panel">
                <h2 class="panel__title" data-i18n="panel_players_blue">Jugadores AZUL</h2>
                <button id="show-team-a" class="btn btn--full" data-i18n="btn_show_blue">Mostrar equipo azul</button>

                <!-- Selector de jugadores (vac铆o, se llena din谩micamente) -->
                <div class="panel__player-selector"></div>

                <!-- Grid de jugadores azules (se llena din谩micamente) -->
                <div id="players-blue" class="player-grid"></div>
            </section>

            <!-- Panel de jugadores del equipo ROJO -->
            <section class="panel">
                <h2 class="panel__title" data-i18n="panel_players_red">Jugadores ROJO</h2>
                <button id="show-team-b" class="btn btn--full" data-i18n="btn_show_red">Mostrar equipo rojo</button>

                <!-- Selector de jugadores (vac铆o, se llena din谩micamente) -->
                <div class="panel__player-selector"></div>

                <!-- Grid de jugadores rojos (se llena din谩micamente) -->
                <div id="players-red" class="player-grid"></div>
            </section>
        </div>

        <!-- Panel de herramientas y modos -->
        <section class="panel">
            <h3 class="panel__title" data-i18n="panel_modes_title">Modos</h3>

            <!-- Control Historial -->
            <div class="history-controls">
                <button id="btn-undo" class="btn btn--secondary" title="Deshacer (Ctrl+Z)"
                    data-i18n-title="btn_undo_title" disabled>
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" />
                    </svg>
                </button>
                <button id="btn-redo" class="btn btn--secondary" title="Rehacer (Ctrl+Y)"
                    data-i18n-title="btn_redo_title" disabled>
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15 15l6-6m0 0l-6-6m6 6H9a6 6 0 000 12h3" />
                    </svg>
                </button>
            </div>

            <!-- Modos de dibujo -->
            <button id="mode-move" class="btn btn--mode is-active" data-i18n="mode_move">Mover / Seleccionar</button>

            <!-- Men煤 desplegable de flechas -->
            <div id="arrow-menu-container" class="dropdown">
                <button id="mode-arrow" class="btn btn--mode" data-i18n="mode_arrow">Flecha
                    <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                    </svg>
                </button>
                <div id="arrow-menu" class="dropdown__menu is-hidden">
                    <button class="dropdown__item" data-arrow="normal" data-i18n="mode_arrow_normal">Flecha
                        normal</button>
                    <button class="dropdown__item" data-arrow="kick" data-i18n="mode_arrow_kick">Flecha de
                        patada</button>
                </div>
            </div>

            <!-- Modo dibujo y goma (agrupados) -->
            <div class="drawing-controls">
                <button id="mode-freehand" class="btn btn--mode btn--flex-grow" data-i18n="mode_draw">Dibujo</button>
                <button id="mode-eraser" class="btn btn--mode btn--icon-only" title="Goma de borrar"
                    data-i18n-title="mode_eraser_title">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M7 16l9-9 4 4-9 9-4-4" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11 12l4 4" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M13 10l4 4" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 20h14" />
                    </svg>
                </button>
            </div>

            <!-- Modo texto -->
            <button id="mode-text" class="btn btn--mode" data-i18n="mode_text">Texto</button>

            <!-- Modo mel茅 -->
            <button id="mode-scrum" class="btn btn--mode" data-i18n="mode_scrum">Mel茅</button>

            <!-- Modo zonas -->
            <button id="mode-zone" class="btn btn--mode" data-i18n="mode_zone">Zonas</button>

            <!-- Modo escudo de entrenamiento -->
            <button id="mode-shield" class="btn btn--mode" data-i18n="mode_shield">Escudo de entrenamiento</button>

            <!-- Control de visibilidad del bal贸n -->
            <button id="toggle-ball" class="btn btn--action" data-i18n="btn_toggle_ball">Mostrar / ocultar
                bal贸n</button>

            <!-- Botones de limpieza -->
            <button id="clear-board" class="btn btn--danger" data-i18n="btn_clear_board">Limpiar tablero</button>
        </section>
    </aside>

    <!-- ========================================
         REA PRINCIPAL (CANVAS)
         ======================================== -->
    <main id="main" class="main-content">
        <!-- Canvas donde se dibuja el campo de rugby -->
        <canvas id="pitch" class="main-content__canvas"></canvas>
    </main>

    <div id="zone-color-panel" class="color-picker is-hidden">
        <div class="color-picker__title" data-i18n="zone_color_title">Color de la zona</div>
        <div class="color-picker__colors">
            <div class="color-picker__swatch color-picker__swatch--1" data-color="#00aaff"></div>
            <div class="color-picker__swatch color-picker__swatch--2" data-color="#ff3333"></div>
            <div class="color-picker__swatch color-picker__swatch--3" data-color="#ffd000"></div>
            <div class="color-picker__swatch color-picker__swatch--4" data-color="#00cc66"></div>
            <div class="color-picker__swatch color-picker__swatch--5" data-color="#ff9100"></div>
        </div>
    </div>

    <!-- ========================================
         PANEL LATERAL DERECHO (ANIMACIN)
         ======================================== -->
    <aside id="right-panel" class="sidebar sidebar--right">
        <!-- Bot贸n de cerrar (Chevron Right) - Flotante -->
        <button id="close-right-panel-btn" class="panel-close-btn" aria-label="Cerrar men煤">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
            </svg>
        </button>



        <!-- Contenedor de controles de frames (para tutorial) -->
        <div id="frame-controls" class="sidebar__group">
            <!-- Barra moderna de frames -->
            <div id="frame-bar" class="frame-bar">
                <button id="prev-frame" class="frame-bar__btn" aria-label="Frame anterior" title="Frame anterior">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        aria-hidden="true" focusable="false">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
                    </svg>
                </button>

                <div id="frame-counter" class="frame-bar__counter">
                    <span data-i18n="anim_frame_label">Frame</span> <span id="current-frame-index">1</span> <span
                        data-i18n="anim_frame_of">de</span>
                    <span id="total-frames">1</span>
                </div>

                <button id="next-frame" class="frame-bar__btn" aria-label="Siguiente frame" title="Siguiente frame">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        aria-hidden="true" focusable="false">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                    </svg>
                </button>
            </div>

            <div id="frame-actions" class="frame-actions">
                <button id="add-frame" class="frame-actions__btn">
                    <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                    </svg> <span data-i18n="btn_add_frame">A帽adir</span>
                </button>
                <button id="delete-frame" class="frame-actions__btn">
                    <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" />
                    </svg> <span data-i18n="btn_delete_frame">Eliminar</span>
                </button>
            </div>
        </div>

        <!-- Contenedor de reproducci贸n y exportaci贸n (para tutorial) -->
        <div id="playback-controls" class="sidebar__group">
            <!-- Controles de reproducci贸n -->
            <div class="form-group form-group--sm">
                <label for="playback-speed" class="label--flex">
                    <span data-i18n="lbl_playback_speed">Velocidad</span>
                    <span id="speed-display">1.0x</span>
                </label>
                <input type="range" id="playback-speed" min="0.25" max="2.0" step="0.25" value="1.0"
                    aria-label="Velocidad de reproducci贸n" aria-valuemin="0.25" aria-valuemax="2.0" aria-valuenow="1.0"
                    aria-valuetext="1.0x">
            </div>

            <!-- Controles de reproducci贸n -->
            <button id="play-animation" class="btn btn--primary">
                <svg class="icon icon--sm" viewBox="0 0 24 24" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653Z"
                        clip-rule="evenodd" />
                </svg> <span data-i18n="btn_play">Reproducir</span>
            </button>
            <button id="pause-animation" class="btn btn--secondary is-hidden">
                <svg class="icon icon--sm" viewBox="0 0 24 24" fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M6.75 5.25a.75.75 0 01.75-.75H9a.75.75 0 01.75.75v13.5a.75.75 0 01-.75.75H7.5a.75.75 0 01-.75-.75V5.25zm7.5 0A.75.75 0 0115 4.5h1.5a.75.75 0 01.75.75v13.5a.75.75 0 01-.75.75H15a.75.75 0 01-.75-.75V5.25z"
                        clip-rule="evenodd" />
                </svg> <span data-i18n="btn_pause">Pausar</span>
            </button>

            <!-- Exportaci贸n de video -->
            <!-- Exportaci贸n de video e im谩gen -->
            <button id="export-webm" class="btn btn--action" data-i18n="btn_export_video">Exportar Video</button>
            <button id="export-image" class="btn btn--action" data-i18n="btn_export_image">Captura de Pantalla
                </button>

            <hr>

            <button id="toggle-presentation" class="btn btn--mode">
                <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" />
                </svg> <span data-i18n="btn_presentation">Modo Presentaci贸n</span>
            </button>

        </div>

        <!-- Field Configuration Panel -->
        <section class="panel">
            <h3 class="panel__title" data-i18n="panel_field_title">Campo</h3>

            <!-- Field type selector -->
            <div class="field-config">
                <div class="field-config__type-selector">
                    <button id="field-type-full" class="field-config__btn is-active" data-i18n="btn_field_full">Campo
                        Completo</button>
                    <button id="field-type-half" class="field-config__btn" data-i18n="btn_field_half">Mitad de
                        Campo</button>
                </div>

                <!-- Rotate button -->
                <button id="rotate-field-btn" class="btn btn--action">
                    <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
                    </svg> <span data-i18n="btn_rotate_field">Rotar Campo</span>
                </button>

                <!-- Current configuration indicator -->
                <div id="field-config-info" class="field-config__info" data-i18n="field_info_full_h">
                    Campo Completo - Horizontal
                </div>

                <!-- Toggle Field Lines Button -->
                <button id="toggle-field-lines-btn" class="btn btn--action" style="margin-top: 10px;">
                    <!-- Icon: Eye Open (Visible) -->
                    <svg id="icon-lines-visible" class="icon icon--sm" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                    </svg>
                    <!-- Icon: Eye Closed (Hidden) -->
                    <svg id="icon-lines-hidden" class="icon icon--sm is-hidden" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88" />
                    </svg>
                    <span id="toggle-field-lines-text">Ocultar L铆neas</span>
                </button>
            </div>
        </section>

        <!-- Formations Panel -->
        <section id="formations-panel" class="panel">
            <h3 class="panel__title" data-i18n="panel_library_title">Biblioteca</h3>

            <!-- PLAYBOOK BUTTON (Library) -->
            <button id="open-library-btn" class="btn btn--accent"
                style="margin-top: 5px; width: 100%; display: flex; align-items: center; justify-content: center; gap: 8px; margin-bottom: 15px;">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
                </svg>
                <span data-i18n="btn_open_library">Biblioteca</span>
            </button>

            <!-- Save Formation Button -->
            <button id="save-formation-btn" class="btn btn--action" style="width: 100%; margin-bottom: 5px;">
                <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9 3.75H6.912a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H15M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859M12 3v8.25m0 0-3-3m3 3 3-3" />
                </svg> <span data-i18n="btn_save_formation">Guardar Formaci贸n</span>
            </button>

            <!-- Save Play Button -->
            <button id="save-play-btn" class="btn btn--action" style="margin-top: 5px; width: 100%; font-size: 0.9rem;">
                <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9 3.75H6.912a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H15M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859M12 3v8.25m0 0-3-3m3 3 3-3" />
                </svg>
                <span data-i18n="btn_save_play">Guardar Jugada</span>
            </button>
        </section>
        <section class="panel">
            <button id="btn-reset-app" class="btn btn--danger is-hidden" data-i18n="btn_reset_app">Resetear
                Todo</button>
        </section>
    </aside>

    <!-- Overlay para m贸vil -->
    <div id="mobile-overlay" class="mobile-overlay is-hidden"></div>

    <!-- Bot贸n flotante para salir de presentaci贸n -->
    <button id="exit-presentation" class="exit-presentation-btn" data-i18n="btn_exit_presentation">Salir de Presentaci贸n
        (ESC)</button>



    <!-- Sistema de notificaciones -->
    <div id="notification" class="notification is-hidden"></div>

    <!-- Bot贸n de ayuda/tutorial -->
    <button id="help-btn" class="help-btn" title="Tutorial" data-i18n-title="tutorial_btn_title">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path stroke-linecap="round" stroke-linejoin="round"
                d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" />
        </svg>
    </button>



    <!-- Bot贸n de borrar elementos seleccionados -->
    <button id="delete-btn" class="delete-btn is-hidden" title="Borrar elemento seleccionado"
        data-i18n="btn_delete_element" data-i18n-title="btn_delete_element">Borrar</button>

    <!-- Sistema de tutorial -->
    <div id="tutorial-overlay" class="tutorial-overlay is-hidden"></div>
    <div id="tutorial-spotlight" class="tutorial-spotlight is-hidden"></div>
    <div id="tutorial-box" class="tutorial-box is-hidden">
        <div id="tutorial-content" class="tutorial-box__content">
            <h3 id="tutorial-title" class="tutorial-box__title"></h3>
            <p id="tutorial-text" class="tutorial-box__text"></p>
        </div>
        <div id="tutorial-navigation" class="tutorial-box__navigation">
            <button id="tutorial-skip" class="btn btn--danger" data-i18n="tutorial_skip">Saltar</button>
            <button id="tutorial-prev" class="btn btn--secondary">
                <span class="btn__label" data-i18n="tutorial_prev">Paso atr谩s</span>
                <span class="btn__icon">
                    <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18" />
                    </svg>
                </span>
            </button>
            <button id="tutorial-next" class="btn btn--primary">
                <span class="btn__label" data-i18n="tutorial_next">Paso adelante</span>
                <span class="btn__icon">
                    <svg class="icon icon--sm" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3" />
                    </svg>
                </span>
            </button>
        </div>
    </div>



    <!-- Script principal de la aplicaci贸n (Monolithic) -->
    <script type="module" src="./src/js/app.js"></script>

    <!-- ===========================
     POPUP MODAL PERSONALIZADO
     =========================== -->
    <div id="popup-overlay" class="popup-overlay is-hidden">
        <div id="popup-modal" class="popup-modal">
            <h2 id="popup-title" class="popup-modal__title">T铆tulo</h2>

            <div id="popup-content" class="popup-modal__content">
                <!-- Aqu铆 va el contenido din谩mico -->
            </div>

            <div id="popup-buttons" class="popup-modal__buttons">
                <button id="popup-cancel" class="btn btn--secondary" data-i18n="popup_cancel">Cancelar</button>
                <button id="popup-ok" class="btn btn--primary" data-i18n="popup_ok">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Gallery Modal REMOVED BY USER REQUEST -->

    <!-- Export Options Modal -->
    <div id="export-modal" class="popup-overlay is-hidden">
        <div class="popup-modal">
            <h2 class="popup-modal__title" data-i18n="export_options_title">Opciones de Exportaci贸n</h2>
            <div class="popup-modal__content">
                <div class="form-group">
                    <label for="export-filename" data-i18n="lbl_filename">Nombre del archivo</label>
                    <input type="text" id="export-filename" placeholder="Animaci贸n" value="Animaci贸n">
                </div>

                <div class="form-group">
                    <label for="export-resolution" data-i18n="lbl_resolution">Resoluci贸n</label>
                    <select id="export-resolution">
                        <option value="current" data-i18n="res_current">Actual (Pantalla)</option>
                        <option value="1920x1080">Full HD (1080p)</option>
                        <option value="2560x1440">2K (1440p)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="export-fps" data-i18n="lbl_fps">Cuadros por segundo (FPS)</label>
                    <select id="export-fps">
                        <option value="30">30 FPS (Normal)</option>
                        <option value="60">60 FPS (Fluido)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="export-quality" data-i18n="lbl_quality">Calidad (Bitrate)</label>
                    <select id="export-quality">
                        <option value="standard" data-i18n="quality_standard">Est谩ndar (5 Mbps)</option>
                        <option value="high" data-i18n="quality_high" selected>Alta (8 Mbps)</option>
                        <option value="ultra" data-i18n="quality_ultra">Ultra (15 Mbps)</option>
                    </select>
                </div>
            </div>
            <div class="popup-modal__buttons">
                <button id="export-cancel" class="btn btn--secondary" data-i18n="btn_cancel">Cancelar</button>
                <button id="export-confirm" class="btn btn--primary" data-i18n="btn_export">Exportar</button>
            </div>
        </div>
    </div>



    <!-- Controles de Presentaci贸n (Flotante Abajo) -->
    <div class="presentation-controls">
        <button id="pres-prev" class="pres-btn" title="Anterior Frame">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="15 18 9 12 15 6"></polyline>
            </svg>
        </button>

        <button id="pres-play" class="pres-btn pres-btn--main" title="Reproducir/Pausar (Espacio)">
            <svg id="pres-play-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round"
                stroke-linejoin="round">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
        </button>

        <button id="pres-next" class="pres-btn" title="Siguiente Frame">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        </button>
    </div>

</body>

</html>